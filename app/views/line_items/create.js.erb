function refreshForm(innerHTML) {
  const newLineItemForm = document.getElementById('new_line_item');
  newLineItemForm.innerHTML = innerHTML;
}

<% if @line_item.errors.any? %>
  <% line_item = LineItem.new %>
  <% line_item.errors.merge!(@line_item.errors) %>
  refreshForm('<%= j render "products/add_to_cart_form", product: @product, line_item: line_item %>');
<% else %>
  refreshForm('<%= j render "products/add_to_cart_form", product: @product, line_item: LineItem.new %>');
  launchModal('#added_to_cart_modal');
<% end %>
launchFlatpickr("#datepicker");
